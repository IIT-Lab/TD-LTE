
#include "FrameTemplate.h"
#include "Frame.h"
#include <stdlib.h>     // abs

static BlockTemplate ds1_template={
  {0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},   
  {0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},   
  {0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
};


static BlockTemplate  ds2_template={
  {0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0},   
  {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0},   
  {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
};


static BlockTemplate  ds3_template={
  {0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1},   
  {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1},   
  {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
};

static BlockTemplate ss1_template={
  {0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   

};

static BlockTemplate  ss2_template={
  {0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0},   
};


static BlockTemplate  us1_template={
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
};


static BlockTemplate  us2_template={
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
  {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   
};


FrameTemplate::Type FrameTemplate::get_type(int sid, int rid){
  switch(sid%5){
    case 0:
      return abs(N_RB/2-rid)<=3 ?       DST2 : DST3;
            
    case 1:
      return abs(N_RB/2-rid)<=3 ?       SST1 : SST2;
      
    case 2:
    case 3:
      return (rid>0 && rid<N_RB-1) ?    UST1 : UST2;
      
    case 4:
      return DST3;
  }
}

void FrameTemplate::init_block_tps(){
  block_tps[DST1] = ds1_template;
  block_tps[DST2] = ds2_template;
  block_tps[DST3] = ds3_template;
  
  block_tps[SST1] = ss1_template;
  block_tps[SST2] = ss2_template;
  
  block_tps[UST1] = us1_template;
  block_tps[UST1] = us2_template;
}

